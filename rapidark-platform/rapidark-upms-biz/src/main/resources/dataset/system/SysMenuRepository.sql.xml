<?xml version="1.0" encoding="utf-8"?>
<sqltoy xmlns="http://www.sagframe.com/schema/sqltoy"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xsi:schemaLocation="http://www.sagframe.com/schema/sqltoy http://www.sagframe.com/schema/sqltoy/sqltoy.xsd">

	<!--通过角色查询菜单信息-->
	<sql id="SysMenuRepository_queryMenusByRoleId">
		<value>
			<![CDATA[
        SELECT sys_menu.*
		FROM sys_menu
		LEFT JOIN sys_role_authority ON sys_menu.menu_id = sys_role_authority.authority_id
		WHERE sys_menu.del_flag = '0'
		  AND sys_role_authority.role_id = :roleId
		ORDER BY sys_menu.sort_order DESC
            ]]>
		</value>
	</sql>

	<!--通过角色ID 查询权限-->
	<sql id="SysMenuRepository_listPermissionsByRoleIds">
		<value>
			<![CDATA[
		SELECT m.permission
		FROM sys_menu m,
			 sys_role_authority rm
		WHERE m.menu_id = rm.menu_id
		  AND m.del_flag = '0'
		  AND rm.role_id IN (:roleIds)
            ]]>
		</value>
	</sql>

	<!--通过角色ID 查询权限-->
	<sql id="SysMenuRepository_queryByNameAndType">
		<value>
			<![CDATA[
		SELECT m.* FROM sys_menu m
		WHERE 1 = 1
		  #[AND m.name like :name]
		  #[AND m.type = :type]
		ORDER BY m.sort_order
            ]]>
		</value>
	</sql>

</sqltoy>